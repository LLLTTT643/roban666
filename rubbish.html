<!-- ice_world_robot_guide/frontend/map.html -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å…¨åŸŸç•…æ¸¸â€”â€”åŸºäºè·¨æ¨¡æ€å­¦ä¹ çš„Robanæ™ºèƒ½æœåŠ¡æœºå™¨äºº</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.loli.net/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
            color: #e2e8f0;
            min-height: 100vh;
        }
        
        .map-container {
            height: 60vh;
            background: linear-gradient(to bottom, #1e293b, #0f172a);
            border-radius: 1rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .map-point {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            position: absolute;
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .map-point:hover {
            transform: translate(-50%, -50%) scale(1.5);
            z-index: 10;
        }
        
        .map-point-label {
            position: absolute;
            background-color: rgba(17, 24, 39, 0.9);
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            white-space: nowrap;
            transform: translateY(-130%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .map-point:hover .map-point-label {
            opacity: 1;
        }
        
        .path-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
            transform-origin: left;
            z-index: 1;
        }
        
        .current-position {
            position: absolute;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background-color: #10b981;
            border: 3px solid #064e3b;
            box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.3);
            transform: translate(-50%, -50%);
            z-index: 5;
            animation: pulse 2s infinite;
        }
        
        .trash-point {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            position: absolute;
            transform: translate(-50%, -50%);
            cursor: pointer;
            background-color: #ef4444;
            border: 2px solid #7f1d1d;
            box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.3);
            animation: pulse 2s infinite;
            z-index: 4;
        }
        
        .trash-collected {
            background-color: #10b981;
            border-color: #064e3b;
            box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.3);
            animation: none;
        }
        
        .trash-label {
            position: absolute;
            background-color: rgba(239, 68, 68, 0.9);
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            white-space: nowrap;
            transform: translateY(-130%);
            opacity: 0;
            transition: opacity 0.3s ease;
            color: white;
        }
        
        .trash-point:hover .trash-label {
            opacity: 1;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
            }
        }
        
        .route-progress {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, rgba(59, 130, 246, 0.3), rgba(96, 165, 250, 0.3));
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
        }
        
        .route-card {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 0.75rem;
            transition: all 0.3s ease;
        }
        
        .route-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(30, 64, 175, 0.3);
        }
        
        .route-step {
            position: relative;
            padding-left: 2rem;
            margin-bottom: 0.75rem;
        }
        
        .route-step::before {
            content: '';
            position: absolute;
            left: 0.5rem;
            top: 0;
            height: 100%;
            width: 2px;
            background-color: #4b5563;
        }
        
        .route-step:last-child::before {
            height: 50%;
        }
        
        .route-step-marker {
            position: absolute;
            left: 0;
            top: 0.25rem;
            width: 1rem;
            height: 1rem;
            border-radius: 50%;
            background-color: #2563eb;
            border: 2px solid #1e3a8a;
        }
        
        .active-step .route-step-marker {
            background-color: #10b981;
            border-color: #064e3b;
            animation: pulse 2s infinite;
        }
        
        .completed-step .route-step-marker {
            background-color: #6366f1;
            border-color: #4338ca;
        }
        
        .badge {
            font-size: 0.7rem;
            padding: 0.15rem 0.5rem;
            border-radius: 9999px;
        }
        
        /* ç²’å­ç‰¹æ•ˆ */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }
        
        /* éšœç¢ç‰©è­¦å‘Šæ ·å¼ */
        .obstacle-warning {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(90deg, #ef4444, #dc2626);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(239, 68, 68, 0.3);
            animation: fadeIn 0.5s ease-in-out;
            opacity: 0;
            visibility: hidden;
        }
        
        .trash-alert {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(90deg, #f59e0b, #d97706);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(245, 158, 11, 0.3);
            animation: fadeIn 0.5s ease-in-out;
            opacity: 0;
            visibility: hidden;
        }
        
        .trash-alert.active {
            opacity: 1;
            visibility: visible;
            animation: warningPulse 2s infinite;
        }
        
        .obstacle-warning.active {
            opacity: 1;
            visibility: visible;
            animation: warningPulse 2s infinite;
        }
        
        @keyframes warningPulse {
            0% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
            }
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translate(-50%, -20px);
            }
            to {
                opacity: 1;
                transform: translate(-50%, 0);
            }
        }
        
        .obstacle-indicator {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-left: 0.5rem;
        }
        
        .obstacle-safe {
            background-color: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }
        
        .obstacle-warning-indicator {
            background-color: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }
        
        .obstacle-danger {
            background-color: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            animation: pulseDanger 2s infinite;
        }
        
        .trash-detected {
            background-color: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            animation: pulseDanger 2s infinite;
        }
        
        @keyframes pulseDanger {
            0% {
                background-color: rgba(239, 68, 68, 0.2);
            }
            50% {
                background-color: rgba(239, 68, 68, 0.4);
            }
            100% {
                background-color: rgba(239, 68, 68, 0.2);
            }
        }
        
        .sensor-card {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 0.75rem;
            transition: all 0.3s ease;
        }
        
        .sensor-value {
            font-family: 'Courier New', monospace;
            background-color: rgba(17, 24, 39, 0.8);
            border-radius: 0.25rem;
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
        }
        
        /* æ™¯ç‚¹è¯¦æƒ…æ¨¡æ€æ¡†æ ·å¼ */
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease-in-out;
        }
        
        .modal-backdrop.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            width: 90%;
            max-width: 600px;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 1rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            transform: scale(0.9);
            transition: transform 0.3s ease-in-out;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
        }
        
        .modal-backdrop.active .modal-content {
            transform: scale(1);
        }
        
        .modal-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .modal-header {
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 2rem;
            height: 2rem;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 10;
        }
        
        .modal-close:hover {
            background-color: rgba(239, 68, 68, 0.8);
        }
        
        .modal-body {
            padding: 1.5rem;
            overflow-y: auto;
        }
        
        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .attraction-info {
            margin-bottom: 1.5rem;
        }
        
        .attraction-stat {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .attraction-stat i {
            width: 1.5rem;
            text-align: center;
            margin-right: 0.5rem;
        }
        
        .step-info-btn {
            cursor: pointer;
            width: 1.5rem;
            height: 1.5rem;
            background-color: rgba(59, 130, 246, 0.2);
            border-radius: 50%;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            margin-left: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .step-info-btn:hover {
            background-color: rgba(59, 130, 246, 0.5);
            transform: scale(1.2);
        }
        
        /* é¢„è®¢æŒ‰é’®æ ·å¼ */
        .booking-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .booking-btn:hover {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.3);
        }
        
        .attraction-rating {
            display: flex;
            align-items: center;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .star {
            color: #fbbf24;
            margin-right: 0.25rem;
        }
        
        .feature-tag {
            background-color: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
            border-radius: 9999px;
            padding: 0.25rem 0.75rem;
            font-size: 0.75rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            display: inline-block;
        }
        
        /* åƒåœ¾æ”¶é›†ç»Ÿè®¡ */
        .trash-stats {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 0.75rem;
            padding: 1rem;
            margin-top: 1rem;
        }
        
        .trash-progress {
            height: 8px;
            background-color: rgba(71, 85, 105, 0.5);
            border-radius: 4px;
            margin-top: 0.5rem;
            overflow: hidden;
        }
        
        .trash-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #34d399);
            transition: width 0.5s ease;
        }
        
        .collect-btn {
            background: linear-gradient(90deg, #f59e0b, #fbbf24);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.25rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .collect-btn:hover {
            background: linear-gradient(90deg, #d97706, #f59e0b);
            transform: translateY(-2px);
        }
        
        .collect-btn:disabled {
            background: #4b5563;
            cursor: not-allowed;
            transform: none;
        }
    </style>
</head>
<body class="text-gray-200">
    <div class="particles" id="particles"></div>
    
    <nav class="bg-gray-900 bg-opacity-80 backdrop-filter backdrop-blur-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <a href="index.html" class="text-2xl font-bold bg-gradient-to-r from-blue-400 to-indigo-500 bg-clip-text text-transparent">
                        ğŸ¤– å…¨åŸŸç•…æ¸¸â€”â€”åŸºäºè·¨æ¨¡æ€å­¦ä¹ çš„Robanæ™ºèƒ½æœåŠ¡æœºå™¨äºº
                    </a>
                    <div class="hidden md:flex space-x-4">
                        <a href="index.html" class="text-blue-600 font-medium py-2">é¦–é¡µ</a>
                        <a href="rubbish.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-800 transition">åƒåœ¾æ£€æµ‹</a>
                        <a href="booking.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-800 transition">æ™¯ç‚¹é¢„è®¢</a>
                    </div>
                </div>
                <div>
                    <button id="mobile-menu-button" class="md:hidden p-2 rounded-md hover:bg-gray-800 transition">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="index.html" class="text-blue-600 font-medium py-2">é¦–é¡µ</a>
                <a href="#" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-gray-800 transition">åƒåœ¾æ£€æµ‹</a>
               <a href="booking.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-800 transition">æ™¯ç‚¹é¢„è®¢</a>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-6">
        <div class="bg-gray-800 bg-opacity-50 rounded-lg p-4 mb-6">
            <h1 class="text-2xl font-bold mb-2">åƒåœ¾æ£€æµ‹å›¾</h1>
            <p class="text-gray-400">ä½¿ç”¨æˆ‘ä»¬çš„æ™ºèƒ½å¯¼èˆªç³»ç»Ÿï¼Œè½»æ¾æ¢ç´¢å†°é›ªä¸–ç•Œçš„æ¯ä¸ªè§’è½ï¼Œæˆ‘ä»¬ä¼šå®æ—¶æ£€æµ‹è·¯çº¿ä¸Šçš„éšœç¢ç‰©å’Œåƒåœ¾ï¼Œç¡®ä¿æ‚¨çš„æ—…è¡Œå®‰å…¨é¡ºç•…ã€‚</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="lg:col-span-2">
                <div class="map-container relative rounded-xl overflow-hidden">
                    <!-- éšœç¢ç‰©è­¦å‘Šå¼¹çª— -->
                    <div id="obstacleWarning" class="obstacle-warning">
                        <i class="fas fa-exclamation-triangle text-xl"></i>
                        <div>
                            <div class="font-bold">æ£€æµ‹åˆ°éšœç¢ç‰©</div>
                            <div class="text-sm">è¯·è°ƒæ•´è·¯çº¿æˆ–ç­‰å¾…éšœç¢ç‰©æ¸…é™¤</div>
                        </div>
                    </div>
                    
                    <!-- åƒåœ¾æ£€æµ‹è­¦å‘Šå¼¹çª— -->
                    <div id="trashAlert" class="trash-alert">
                        <i class="fas fa-trash-alt text-xl"></i>
                        <div>
                            <div class="font-bold">æ£€æµ‹åˆ°åƒåœ¾</div>
                            <div class="text-sm">æ‚¨å¯ä»¥ç‚¹å‡»åƒåœ¾ç‚¹è¿›è¡Œæ”¶é›†</div>
                        </div>
                    </div>
                    
                    <!-- åœ°å›¾æ¸²æŸ“åŒºåŸŸ -->
                    <div id="map" class="w-full h-full relative">
                        <!-- è·¯çº¿è¿›åº¦æŒ‡ç¤ºå™¨ -->
                        <div id="routeProgress" class="route-progress"></div>
                        
                        <!-- å½“å‰ä½ç½®æ ‡è®° -->
                        <div id="currentPosition" class="current-position"></div>
                        
                        <!-- åƒåœ¾ç‚¹æ ‡è®° -->
                        <!-- åŠ¨æ€ç”Ÿæˆ -->
                        
                        <!-- åœ°å›¾è·¯å¾„çº¿ -->
                        <!-- åŠ¨æ€ç”Ÿæˆ -->
                        
                        <!-- åœ°å›¾ç‚¹ä½ -->
                        <!-- åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                    <div class="sensor-card p-4">
                        <h3 class="text-sm text-gray-400 mb-1">GPS å®šä½</h3>
                        <div id="gps-status" class="text-lg font-semibold">
                            <i class="fas fa-satellite text-blue-400 mr-2"></i>
                            <span class="sensor-value" id="gps-value">å·²è¿æ¥</span>
                        </div>
                    </div>
                    
                    <div class="sensor-card p-4">
                        <h3 class="text-sm text-gray-400 mb-1">éšœç¢ç‰©æ£€æµ‹</h3>
                        <div id="obstacle-status" class="text-lg font-semibold flex items-center">
                            <i class="fas fa-radar text-green-400 mr-2"></i>
                            <span class="sensor-value" id="obstacle-value">æ­£åœ¨æ‰«æ</span>
                            <span id="obstacle-indicator" class="obstacle-indicator obstacle-safe ml-2">å®‰å…¨</span>
                        </div>
                    </div>
                    
                    <div class="sensor-card p-4">
                        <h3 class="text-sm text-gray-400 mb-1">åƒåœ¾æ£€æµ‹</h3>
                        <div id="trash-status" class="text-lg font-semibold flex items-center">
                            <i class="fas fa-trash text-yellow-400 mr-2"></i>
                            <span class="sensor-value" id="trash-value">æ­£åœ¨æ‰«æ</span>
                            <span id="trash-indicator" class="obstacle-indicator obstacle-safe ml-2">æ— åƒåœ¾</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="route-card p-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-bold">è·¯çº¿æŒ‡å¼•</h2>
                    <div class="flex items-center">
                        <span class="text-sm text-gray-400 mr-2">é¢„è®¡æ—¶é—´:</span>
                        <span class="font-mono bg-gray-800 px-2 py-1 rounded text-blue-400">18:32</span>
                    </div>
                </div>
                
                <div class="mb-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <i class="fas fa-walking text-blue-500 mr-2"></i>
                            <span>æ­¥è¡Œè·¯çº¿</span>
                        </div>
                        <div>
                            <span class="badge bg-blue-900 text-blue-200">1.2 å…¬é‡Œ</span>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-1 mb-6">
                    <div class="route-step completed-step" data-step-id="entrance">
                        <div class="route-step-marker"></div>
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="font-medium">å†°é›ªä¸–ç•Œå…¥å£</div>
                                <div class="text-sm text-gray-400">å·²é€šè¿‡å…¥å£é—¸æœº</div>
                            </div>
                            <div class="step-info-btn" onclick="showAttractionInfo('entrance')">
                                <i class="fas fa-info"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="route-step active-step" data-step-id="icesculpture">
                        <div class="route-step-marker"></div>
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="font-medium">å†°é›ªå¤§ä¸–ç•Œå”®ç¥¨å¤„</div>
                                <div class="text-sm text-gray-400">
                                    æ­¥è¡Œ 200 ç±³ 
                                    <span id="step-obstacle-status" class="obstacle-indicator obstacle-safe ml-2">å®‰å…¨</span>
                                </div>
                            </div>
                            <div class="step-info-btn" onclick="showAttractionInfo('icesculpture')">
                                <i class="fas fa-info"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="route-step" data-step-id="sledtrack">
                        <div class="route-step-marker"></div>
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="font-medium">é›ªæ™¯é…’åº—</div>
                                <div class="text-sm text-gray-400">æ­¥è¡Œ 400 ç±³</div>
                            </div>
                            <div class="step-info-btn" onclick="showAttractionInfo('sledtrack')">
                                <i class="fas fa-info"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="route-step" data-step-id="restaurant">
                        <div class="route-step-marker"></div>
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="font-medium">é“é”…ç‚–</div>
                                <div class="text-sm text-gray-400">æ­¥è¡Œ 350 ç±³</div>
                            </div>
                            <div class="step-info-btn" onclick="showAttractionInfo('restaurant')">
                                <i class="fas fa-info"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="route-step" data-step-id="forest">
                        <div class="route-step-marker"></div>
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="font-medium">çºªå¿µå“</div>
                                <div class="text-sm text-gray-400">æ­¥è¡Œ 250 ç±³</div>
                            </div>
                            <div class="step-info-btn" onclick="showAttractionInfo('forest')">
                                <i class="fas fa-info"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- åƒåœ¾æ”¶é›†ç»Ÿè®¡ -->
                <div class="trash-stats">
                    <div class="flex justify-between items-center">
                        <h3 class="font-medium">ç¯ä¿è¡ŒåŠ¨</h3>
                        <div class="text-sm text-blue-400">
                            <span id="collected-count">0</span>/<span id="total-trash">0</span> åƒåœ¾æ”¶é›†
                        </div>
                    </div>
                    <div class="trash-progress">
                        <div id="trash-progress-bar" class="trash-progress-bar" style="width: 0%"></div>
                    </div>
                    <div class="mt-2 text-xs text-gray-400">
                        æ”¶é›†åƒåœ¾å¯è·å¾—ç¯ä¿ç§¯åˆ†å’Œæˆå°±
                    </div>
                    <button id="collect-btn" class="collect-btn mt-3 w-full" disabled>
                        <i class="fas fa-trash-restore"></i>
                        <span>æ”¶é›†åƒåœ¾</span>
                    </button>
                </div>
                
                <div class="space-y-4 mt-4">
                    <div class="bg-gradient-to-r from-blue-900 to-indigo-900 p-3 rounded-lg">
                        <div class="flex items-center">
                            <i class="fas fa-info-circle text-blue-300 mr-2"></i>
                            <span class="text-sm">å½“å‰æµ·æ‹”: 1420 ç±³</span>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-gray-800 to-gray-900 p-3 rounded-lg">
                        <div class="flex items-center">
                            <i class="fas fa-temperature-low text-blue-400 mr-2"></i>
                            
                        </div>
                    </div>
                    
                    <button class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 flex items-center justify-center">
                        <i class="fas fa-route mr-2"></i>
                        é‡æ–°è§„åˆ’è·¯çº¿
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- æ™¯ç‚¹è¯¦æƒ…æ¨¡æ€æ¡† -->
    <div id="attractionModal" class="modal-backdrop">
        <div class="modal-content">
            <div class="modal-header">
                <img id="modalImage" class="modal-image" src="" alt="æ™¯ç‚¹å›¾ç‰‡">
                <div class="modal-close" onclick="closeAttractionInfo()">
                    <i class="fas fa-times"></i>
                </div>
            </div>
            <div class="modal-body">
                <h2 id="modalTitle" class="text-xl font-bold mb-2"></h2>
                
                <div class="attraction-rating">
                    <span class="star"><i class="fas fa-star"></i></span>
                    <span class="star"><i class="fas fa-star"></i></span>
                    <span class="star"><i class="fas fa-star"></i></span>
                    <span class="star"><i class="fas fa-star"></i></span>
                    <span class="star"><i class="fas fa-star-half-alt"></i></span>
                    <span class="text-sm ml-2 text-gray-400" id="modalRating"></span>
                </div>
                
                <div class="mb-3" id="modalTags"></div>
                
                <p id="modalDescription" class="text-gray-300 mb-6"></p>
                
                <div class="attraction-info">
                    <h3 class="text-lg font-semibold mb-2">æ™¯ç‚¹ä¿¡æ¯</h3>
                    
                    <div class="attraction-stat">
                        <i class="fas fa-clock text-blue-400"></i>
                        <span>å¼€æ”¾æ—¶é—´: <span id="modalOpenHours"></span></span>
                    </div>
                    
                    <div class="attraction-stat">
                        <i class="fas fa-users text-purple-400"></i>
                        <span>æ¨èæ¸¸è§ˆæ—¶é—´: <span id="modalDuration"></span></span>
                    </div>
                    
                    <div class="attraction-stat">
                        <i class="fas fa-ticket-alt text-green-400"></i>
                        <span>é—¨ç¥¨ä»·æ ¼: <span id="modalPrice"></span></span>
                    </div>
                    
                    <div class="attraction-stat">
                        <i class="fas fa-map-marker-alt text-red-400"></i>
                        <span>ä½ç½®: <span id="modalLocation"></span></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="text-sm text-gray-400">
                    <i class="fas fa-user-friends mr-1"></i>
                    <span id="modalVisitorCount"></span> äººæ­£åœ¨æ¸¸è§ˆ
                </div>
                <a id="bookingLink" href="booking.html" class="booking-btn">
                    <i class="fas fa-calendar-plus"></i>
                    ç«‹å³é¢„è®¢
                </a>
            </div>
        </div>
    </div>

    <!-- åƒåœ¾æ”¶é›†ç¡®è®¤å¼¹çª— -->
    <div id="trashCollectModal" class="modal-backdrop">
        <div class="modal-content">
            <div class="modal-body p-6 text-center">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-trash-restore text-green-500 text-2xl"></i>
                </div>
                <h3 class="text-xl font-medium mb-2">æ”¶é›†åƒåœ¾ç¡®è®¤</h3>
                <p class="text-gray-400 mb-6">æ‚¨ç¡®å®šè¦æ”¶é›†è¿™ä¸ªåƒåœ¾å—ï¼Ÿè¿™å°†æœ‰åŠ©äºä¿æŒå†°é›ªä¸–ç•Œçš„æ¸…æ´ç¯å¢ƒã€‚</p>
                
                <div class="grid grid-cols-2 gap-4">
                    <button onclick="closeTrashCollectModal()" class="py-2 px-4 border border-gray-600 rounded-md hover:bg-gray-800 transition">
                        å–æ¶ˆ
                    </button>
                    <button id="confirm-collect" class="bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-md transition">
                        ç¡®è®¤æ”¶é›†
                    </button>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-gray-900 bg-opacity-80 backdrop-filter backdrop-blur-lg mt-8 py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between">
                <div class="mb-6 md:mb-0">
                    <h2 class="text-xl font-bold mb-4 bg-gradient-to-r from-blue-400 to-indigo-500 bg-clip-text text-transparent">å†°é›ªä¸–ç•Œæœºå™¨äººå¯¼æ¸¸</h2>
                    <p class="text-gray-400 max-w-md">è®©æ‚¨çš„å†°é›ªä¸–ç•Œä¹‹æ—…æ›´åŠ æ™ºèƒ½ã€å®‰å…¨ã€æœ‰è¶£ï¼Œæˆ‘ä»¬çš„æœºå™¨äººå¯¼æ¸¸å°†å…¨ç¨‹ä¸ºæ‚¨æä¾›ä¸“ä¸šæœåŠ¡ã€‚</p>
                </div>
                <div class="grid grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-lg font-semibold mb-3">å¿«é€Ÿé“¾æ¥</h3>
                        <ul class="space-y-2">
                            <li><a href="index.html" class="text-gray-400 hover:text-white transition">é¦–é¡µ</a></li>
                            <li><a href="map.html" class="text-gray-400 hover:text-white transition">åœ°å›¾å¯¼èˆª</a></li>
                            <li><a href="#" class="text-gray-400 hover:text-white transition">æ™¯ç‚¹ä»‹ç»</a></li>
                            <li><a href="booking.html" class="text-gray-400 hover:text-white transition">é¢„è®¢ä¿¡æ¯</a></li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-3">è”ç³»æˆ‘ä»¬</h3>
                        <ul class="space-y-2">
                            <li class="flex items-center"><i class="fas fa-envelope text-blue-400 mr-2"></i> <span class="text-gray-400">zy135246_2024@qq.com</span></li>
                            <li class="flex items-center"><i class="fas fa-phone text-blue-400 mr-2"></i> <span class="text-gray-400">132 8492 3154</span></li>
                            <li class="flex items-center"><i class="fas fa-map-marker-alt text-blue-400 mr-2"></i> <span class="text-gray-400">å†°é›ªä¸–ç•Œä¸»é¢˜å…¬å›­</span></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-6 text-center text-gray-500 text-sm">
                &copy; 2025 ä¸œåŒ—å°æ¸…å ç‰ˆæƒæ‰€æœ‰
            </div>
        </div>
    </footer>

    <script>
        // ç§»åŠ¨èœå•åˆ‡æ¢
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
        
        // ç²’å­ç‰¹æ•ˆ
        const particles = document.getElementById('particles');
        
        function createParticle() {
            const particle = document.createElement('div');
            particle.style.position = 'absolute';
            particle.style.width = Math.random() * 3 + 1 + 'px';
            particle.style.height = particle.style.width;
            particle.style.backgroundColor = `rgba(255, 255, 255, ${Math.random() * 0.3 + 0.1})`;
            particle.style.borderRadius = '50%';
            particle.style.top = Math.random() * 100 + 'vh';
            particle.style.left = Math.random() * 100 + 'vw';
            
            const duration = Math.random() * 20 + 10;
            particle.style.animation = `float ${duration}s linear infinite`;
            
            const keyframes = `
                @keyframes float {
                    0% {
                        transform: translateY(0) rotate(0);
                        opacity: ${Math.random() * 0.3 + 0.2};
                    }
                    50% {
                        opacity: ${Math.random() * 0.3 + 0.1};
                    }
                    100% {
                        transform: translateY(-${Math.random() * 100 + 50}vh) rotate(${Math.random() * 360}deg);
                        opacity: 0;
                    }
                }
            `;
            
            const style = document.createElement('style');
            style.innerHTML = keyframes;
            document.head.appendChild(style);
            
            particles.appendChild(particle);
            
            setTimeout(() => {
                particle.remove();
                style.remove();
            }, duration * 1000);
        }
        
        // åˆ›å»ºåˆå§‹ç²’å­
        for (let i = 0; i < 30; i++) {
            createParticle();
        }
        
        // å®šæœŸåˆ›å»ºæ–°ç²’å­
        setInterval(createParticle, 1000);
        
        // åƒåœ¾æ•°æ®
        const trashData = [
            { id: 'trash1', x: 30, y: 50, type: 'plastic', collected: false },
            { id: 'trash2', x: 40, y: 45, type: 'paper', collected: false },
            { id: 'trash3', x: 50, y: 35, type: 'can', collected: false },
            { id: 'trash4', x: 60, y: 30, type: 'plastic', collected: false },
            { id: 'trash5', x: 70, y: 25, type: 'paper', collected: false }
        ];
        
        // æ¸²æŸ“åƒåœ¾ç‚¹
        function renderTrashPoints() {
            trashData.forEach(trash => {
                if (!trash.collected) {
                    const trashPoint = document.createElement('div');
                    trashPoint.className = 'trash-point';
                    trashPoint.id = trash.id;
                    trashPoint.style.left = `${trash.x}%`;
                    trashPoint.style.top = `${trash.y}%`;
                    
                    const trashLabel = document.createElement('div');
                    trashLabel.className = 'trash-label';
                    trashLabel.textContent = `${trash.type === 'plastic' ? 'å¡‘æ–™ç“¶' : trash.type === 'paper' ? 'çº¸å±‘' : 'æ˜“æ‹‰ç½'}`;
                    
                    trashPoint.appendChild(trashLabel);
                    map.appendChild(trashPoint);
                    
                    // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                    trashPoint.addEventListener('click', function() {
                        selectedTrashId = trash.id;
                        openTrashCollectModal();
                    });
                }
            });
            
            // æ›´æ–°åƒåœ¾ç»Ÿè®¡
            updateTrashStats();
        }
        
        // æ›´æ–°åƒåœ¾ç»Ÿè®¡
        function updateTrashStats() {
            const totalTrash = trashData.length;
            const collectedCount = trashData.filter(t => t.collected).length;
            
            document.getElementById('collected-count').textContent = collectedCount;
            document.getElementById('total-trash').textContent = totalTrash;
            
            const progressPercent = (collectedCount / totalTrash) * 100;
            document.getElementById('trash-progress-bar').style.width = `${progressPercent}%`;
            
            // å¦‚æœæœ‰æœªæ”¶é›†çš„åƒåœ¾ï¼Œå¯ç”¨æ”¶é›†æŒ‰é’®
            if (collectedCount < totalTrash) {
                collectBtn.disabled = false;
            } else {
                collectBtn.disabled = true;
            }
        }
        
        // æ‰“å¼€åƒåœ¾æ”¶é›†ç¡®è®¤å¼¹çª—
        function openTrashCollectModal() {
            document.getElementById('trashCollectModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        // å…³é—­åƒåœ¾æ”¶é›†ç¡®è®¤å¼¹çª—
        function closeTrashCollectModal() {
            document.getElementById('trashCollectModal').classList.remove('active');
            document.body.style.overflow = '';
            selectedTrashId = null;
        }
        
        // ç¡®è®¤æ”¶é›†åƒåœ¾
        document.getElementById('confirm-collect').addEventListener('click', function() {
            if (selectedTrashId) {
                // æ ‡è®°åƒåœ¾ä¸ºå·²æ”¶é›†
                const trash = trashData.find(t => t.id === selectedTrashId);
                if (trash) {
                    trash.collected = true;
                    
                    // æ›´æ–°UI
                    const trashElement = document.getElementById(trash.id);
                    if (trashElement) {
                        trashElement.classList.add('trash-collected');
                        setTimeout(() => {
                            trashElement.remove();
                        }, 1000);
                    }
                    
                    // æ˜¾ç¤ºæ”¶é›†æˆåŠŸæç¤º
                    trashAlert.classList.add('active');
                    setTimeout(() => {
                        trashAlert.classList.remove('active');
                    }, 3000);
                    
                    // æ›´æ–°ç»Ÿè®¡
                    updateTrashStats();
                    
                    // ä¿å­˜åˆ°localStorage
                    saveTrashCollection();
                }
            }
            
            closeTrashCollectModal();
        });
        
        // ä¿å­˜åƒåœ¾æ”¶é›†æ•°æ®
        function saveTrashCollection() {
            const collectedTrash = trashData.filter(t => t.collected).map(t => t.id);
            localStorage.setItem('collectedTrash', JSON.stringify(collectedTrash));
        }
        
        // åŠ è½½åƒåœ¾æ”¶é›†æ•°æ®
        function loadTrashCollection() {
            const collectedTrash = JSON.parse(localStorage.getItem('collectedTrash')) || [];
            trashData.forEach(trash => {
                if (collectedTrash.includes(trash.id)) {
                    trash.collected = true;
                }
            });
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // åŠ è½½åƒåœ¾æ”¶é›†æ•°æ®
            loadTrashCollection();
            
            // æ¸²æŸ“åƒåœ¾ç‚¹
            renderTrashPoints();
            
            // å¦‚æœæœ‰æœªæ”¶é›†çš„åƒåœ¾ï¼Œæ˜¾ç¤ºæç¤º
            const hasUncollectedTrash = trashData.some(t => !t.collected);
            if (hasUncollectedTrash) {
                setTimeout(() => {
                    trashAlert.classList.add('active');
                    setTimeout(() => {
                        trashAlert.classList.remove('active');
                    }, 3000);
                }, 2000);
            }
        });
    </script>
</body>
</html>

