<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å…¨åŸŸç•…æ¸¸â€”â€”åŸºäºè·¨æ¨¡æ€å­¦ä¹ çš„Robanæ™ºèƒ½æœåŠ¡æœºå™¨äºº</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.loli.net/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
            color: #e2e8f0;
            min-height: 100vh;
        }
        
        .booking-card {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 1rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .booking-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.4);
        }
        
        .attraction-card {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 0.75rem;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .attraction-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
        }
        
        .attraction-card.selected {
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
        }
        
        .attraction-image {
            height: 150px;
            width: 100%;
            object-fit: cover;
        }
        
        .badge {
            font-size: 0.7rem;
            padding: 0.15rem 0.5rem;
            border-radius: 9999px;
        }
        
        .form-input {
            background-color: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(71, 85, 105, 0.5);
            color: #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
            outline: none;
        }
        
        .form-select {
            background-color: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(71, 85, 105, 0.5);
            color: #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .form-select:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
            outline: none;
        }
        
        .booking-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .booking-btn:hover {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.3);
        }
        
        .payment-method {
            background-color: rgba(30, 41, 59, 0.8);
            border: 2px solid transparent;
            border-radius: 0.5rem;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .payment-method:hover {
            background-color: rgba(30, 41, 59, 1);
        }
        
        .payment-method.selected {
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
        }
        
        .payment-icon {
            font-size: 1.5rem;
            margin-right: 0.5rem;
        }
        
        .step-container {
            position: relative;
            padding-bottom: 2rem;
        }
        
        .step-container:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 2.5rem;
            left: 1rem;
            height: calc(100% - 2.5rem);
            width: 2px;
            background-color: #3b82f6;
        }
        
        .step-circle {
            width: 2rem;
            height: 2rem;
            background-color: #3b82f6;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        /* ç²’å­ç‰¹æ•ˆ */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }
        
        /* æ—¥æœŸé€‰æ‹©å™¨è‡ªå®šä¹‰æ ·å¼ */
        input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(0.8);
            cursor: pointer;
        }
        
        /* æ—¶é—´é€‰æ‹©å™¨è‡ªå®šä¹‰æ ·å¼ */
        input[type="time"]::-webkit-calendar-picker-indicator {
            filter: invert(0.8);
            cursor: pointer;
        }
        
        /* æŠ˜æ‰£æ ‡ç­¾æ ·å¼ */
        .discount-label {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: bold;
            transform: rotate(10deg);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        /* ç¡®è®¤å¼¹çª—æ ·å¼ */
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease-in-out;
        }
        
        .modal-backdrop.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            width: 90%;
            max-width: 500px;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 1rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            transform: scale(0.9);
            transition: transform 0.3s ease-in-out;
        }
        
        .modal-backdrop.active .modal-content {
            transform: scale(1);
        }
        
        .loading-spinner {
            width: 3rem;
            height: 3rem;
            border: 3px solid rgba(59, 130, 246, 0.3);
            border-radius: 50%;
            border-top-color: #3b82f6;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
        
        .success-animation {
            width: 4rem;
            height: 4rem;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(16, 185, 129, 0.2);
            border-radius: 50%;
            position: relative;
        }
        
        .success-checkmark {
            width: 2rem;
            height: 1rem;
            border-left: 3px solid #10b981;
            border-bottom: 3px solid #10b981;
            transform: rotate(-45deg);
            animation: checkmark 0.5s ease-in-out forwards;
            opacity: 0;
        }
        
        @keyframes checkmark {
            0% {
                width: 0;
                height: 0;
                opacity: 0;
            }
            50% {
                width: 0;
                height: 1rem;
                opacity: 1;
            }
            100% {
                width: 2rem;
                height: 1rem;
                opacity: 1;
            }
        }
        
        .ticket-info {
            position: relative;
            background: rgba(17, 24, 39, 0.8);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
        }
        
        .ticket-info::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                -45deg,
                transparent,
                transparent 10px,
                rgba(59, 130, 246, 0.05) 10px,
                rgba(59, 130, 246, 0.05) 20px
            );
            border-radius: 0.5rem;
            z-index: -1;
        }
    </style>
</head>
<body class="text-gray-200">
    <div class="particles" id="particles"></div>
    
    <nav class="bg-gray-900 bg-opacity-80 backdrop-filter backdrop-blur-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <a href="index.html" class="text-2xl font-bold bg-gradient-to-r from-blue-400 to-indigo-500 bg-clip-text text-transparent">
                        ğŸ¤– å…¨åŸŸç•…æ¸¸â€”â€”åŸºäºè·¨æ¨¡æ€å­¦ä¹ çš„Robanæ™ºèƒ½æœåŠ¡æœºå™¨äºº
                    </a>
                    <div class="hidden md:flex space-x-4">
                        <a href="index.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-800 transition">é¦–é¡µ</a>
                        <a href="map.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-800 transition">åœ°å›¾å¯¼èˆª</a>
                        <a href="rubbish.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-gray-800 transition">åƒåœ¾æ£€æµ‹</a>
                        <a href="booking.html" class="px-3 py-2 rounded-md text-sm font-medium bg-blue-600 text-white">æ™¯ç‚¹é¢„è®¢</a>
                    </div>
                </div>
                <div>
                    <button id="mobile-menu-button" class="md:hidden p-2 rounded-md hover:bg-gray-800 transition">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="index.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-gray-800 transition">é¦–é¡µ</a>
                <a href="map.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-gray-800 transition">åœ°å›¾å¯¼èˆª</a>
                <a href="rubbish.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-gray-800 transition">åƒåœ¾æ£€æµ‹</a>
                <a href="booking.html" class="block px-3 py-2 rounded-md text-base font-medium bg-blue-600 text-white">æ™¯ç‚¹é¢„è®¢</a>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-6">
        <div class="bg-gray-800 bg-opacity-50 rounded-lg p-4 mb-6">
            <h1 class="text-2xl font-bold mb-2">å†°é›ªä¸–ç•Œæ™¯ç‚¹é¢„è®¢</h1>
            <p class="text-gray-400">æå‰é¢„è®¢æ™¯ç‚¹é—¨ç¥¨å’Œé¡¹ç›®ï¼Œé¿å…æ’é˜Ÿç­‰å¾…ï¼Œäº«å—ä¼˜å…ˆå…¥åœºå’Œä¸“å±æœåŠ¡ã€‚</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="lg:col-span-2 space-y-8">
                <!-- æ­¥éª¤1ï¼šé€‰æ‹©æ™¯ç‚¹ -->
                <div class="step-container">
                    <div class="flex items-center mb-4">
                        <div class="step-circle">1</div>
                        <h2 class="text-xl font-bold ml-3">é€‰æ‹©æ™¯ç‚¹</h2>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="attraction-card" onclick="selectAttraction(this, 'icesculpture')">
                            <div class="relative">
                                <img src="img/å›¾ç‰‡.jpg" alt="å†°é›ªå¤§ä¸–ç•Œé—¨ç¥¨" class="attraction-image">
                                <div class="discount-label">å­¦ç”Ÿä¼˜æƒ </div>
								
                            </div>
                            <div class="p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="font-bold">å†°é›ªå¤§ä¸–ç•Œé—¨ç¥¨</h3>
                                    <span class="text-blue-400 font-bold">åŸä»·<s>Â¥325</s><br>ä¼˜æƒ å Â¥260</span>
                                </div>
                                <div class="flex items-center text-sm text-gray-400 mb-2">
                                    <i class="fas fa-clock mr-1"></i> 12å°æ—¶
                                </div>
                                <p class="text-sm text-gray-400 line-clamp-2">å“ˆå°”æ»¨å†°é›ªå¤§ä¸–ç•Œå§‹åˆ›äº 1999 å¹´ï¼Œæ˜¯å¤§å‹å†°é›ªè‰ºæœ¯å·¥ç¨‹ï¼Œå†°é›•é›ªå¡‘ç¾è½®ç¾å¥‚ï¼Œå¨±ä¹é¡¹ç›®ä¸°å¯Œï¼Œæ˜¯å†¬å­£çƒ­é—¨æ—…æ¸¸åœ°ã€‚</p>
                                <div class="mt-3 flex items-center">
                                    <div class="flex">
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star-half-alt text-yellow-400"></i>
                                    </div>
                                    <span class="text-xs text-gray-400 ml-2">4.9 (2157æ¡è¯„ä»·)</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="attraction-card" onclick="selectAttraction(this, 'sledtrack')">
                            <img src="img/å¾®ä¿¡å›¾ç‰‡_20250614191316.jpg" alt="é›ªæ™¯é…’åº—" class="attraction-image">
                            <div class="p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="font-bold">é›ªæ™¯é…’åº—</h3>
                                    <span class="text-blue-400 font-bold">Â¥120</span>
                                </div>
                                <div class="flex items-center text-sm text-gray-400 mb-2">
                                    <i class="fas fa-clock mr-1"></i> æ¯å¤©
                                </div>
                                <p class="text-sm text-gray-400 line-clamp-2">é›ªæ™¯é…’åº—ä¾é›ªè€Œå»ºï¼Œå†°é›•å®¢æˆ¿æ­é…æš–ç»’è®¾æ–½ï¼Œæ¨çª—è§æ—æµ·é›ªåŸã€‚æä¾›æ»‘é›ªç›´è¾¾ã€é›ªåœ°æ¸©æ³‰ç­‰æœåŠ¡ï¼Œå¤œæ™šç¯å…‰æ˜ é›ªï¼Œå®›å¦‚ç«¥è¯ç§˜å¢ƒã€‚</p>
                                <div class="mt-3 flex items-center">
                                    <div class="flex">
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                    </div>
                                    <span class="text-xs text-gray-400 ml-2">4.8 (1834æ¡è¯„ä»·)</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="attraction-card" onclick="selectAttraction(this, 'restaurant')">
                            <img src="img/é“é”…ç‚–.png" alt="é“é”…ç‚–" class="attraction-image">
                            <div class="p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="font-bold">é“é”…ç‚–</h3>
                                    <span class="text-blue-400 font-bold">Â¥268èµ·</span>
                                </div>
                                <div class="flex items-center text-sm text-gray-400 mb-2">
                                    <i class="fas fa-clock mr-1">æ¯é”…</i> 
                                </div>
                                <p class="text-sm text-gray-400 line-clamp-2">é“é”…ç‚–æ˜¯ä¸œåŒ—ç‰¹è‰²ç¾é£Ÿï¼Œå¤§é“é”…ç‚–ç…®é¸¡ã€é±¼ã€æ’éª¨ç­‰é£Ÿæï¼Œæ­é…åœŸè±†ã€ç‰ç±³ç­‰é…èœï¼Œè´´æ»¡é¢é¥¼ï¼Œé¦™æ°”æµ“éƒï¼Œæ°›å›´çƒ­é—¹ï¼Œå°½æ˜¾ä¸œåŒ—è±ªçˆ½ã€‚</p>
                                <div class="mt-3 flex items-center">
                                    <div class="flex">
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star-half-alt text-yellow-400"></i>
                                    </div>
                                    <span class="text-xs text-gray-400 ml-2">4.6 (987æ¡è¯„ä»·)</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="attraction-card" onclick="selectAttraction(this, 'forest')">
                            <div class="relative">
                                <img src="img/é’¥åŒ™é“¾.jpg" alt="çºªå¿µå“" class="attraction-image">
                                <div class="discount-label">é™æ—¶ç‰¹æƒ </div>
                            </div>
                            <div class="p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="font-bold">çºªå¿µå“</h3>
                                    <span class="text-blue-400 font-bold">Â¥50</span>
                                </div>
                                <div class="flex items-center text-sm text-gray-400 mb-2">
                                    <i class="fas fa-clock mr-1"></i> æ¯ä¸ª
                                </div>
                                <p class="text-sm text-gray-400 line-clamp-2">å†°é›ªä¸»é¢˜çºªå¿µå“å¤šæ ·ï¼Œå†°é›•æ‘†ä»¶æ™¶è¹å‰”é€ï¼Œé›ªç»’ç©å¶æ†¨æ€å¯æ¬ï¼Œè¿˜æœ‰åˆ»ç€é›ªèŠ±å›¾æ¡ˆçš„å›´å·¾ã€é’¥åŒ™æ‰£ï¼Œæ»¡è½½å†¬æ—¥æµªæ¼«è®°å¿†ã€‚</p>
                                <div class="mt-3 flex items-center">
                                    <div class="flex">
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                    </div>
                                    <span class="text-xs text-gray-400 ml-2">4.9 (1567æ¡è¯„ä»·)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- æ­¥éª¤2ï¼šé€‰æ‹©æ—¥æœŸå’Œæ—¶é—´ -->
                <div class="step-container">
                    <div class="flex items-center mb-4">
                        <div class="step-circle">2</div>
                        <h2 class="text-xl font-bold ml-3">é€‰æ‹©æ—¥æœŸå’Œæ—¶é—´</h2>
                    </div>
                    
                    <div class="booking-card p-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="booking-date" class="block text-sm font-medium text-gray-300 mb-2">å‚è§‚æ—¥æœŸ</label>
                                <input type="date" id="booking-date" name="booking-date" min="2025-05-07" class="form-input w-full rounded-md" required>
                            </div>
                            <div>
                                <label for="booking-time" class="block text-sm font-medium text-gray-300 mb-2">å‚è§‚æ—¶é—´</label>
                                <select id="booking-time" name="booking-time" class="form-select w-full rounded-md">
                                    <option value="" disabled selected>è¯·é€‰æ‹©æ—¶é—´æ®µ</option>
                                    <option value="09:00">09:00 - 10:00</option>
                                    <option value="10:00">10:00 - 11:00</option>
                                    <option value="11:00">11:00 - 12:00</option>
                                    <option value="13:00">13:00 - 14:00</option>
                                    <option value="14:00">14:00 - 15:00</option>
                                    <option value="15:00">15:00 - 16:00</option>
                                    <option value="16:00">16:00 - 17:00</option>
                                    <option value="17:00">17:00 - 18:00</option>
                                    <option value="18:00">18:00 - 19:00</option>
                                    <option value="19:00">19:00 - 20:00</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <label for="visitors" class="block text-sm font-medium text-gray-300 mb-2">è®¿å®¢äººæ•°</label>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <div>
                                    <label for="adult-count" class="block text-xs text-gray-400 mb-1">æˆäºº</label>
                                    <div class="flex items-center">
                                        <button type="button" class="bg-gray-700 rounded-l-md px-3 py-2 focus:outline-none" onclick="decrementCount('adult-count')">-</button>
                                        <input type="number" id="adult-count" name="adult-count" min="1" max="10" value="2" class="form-input w-12 text-center py-2 border-l-0 border-r-0 rounded-none" readonly>
                                        <button type="button" class="bg-gray-700 rounded-r-md px-3 py-2 focus:outline-none" onclick="incrementCount('adult-count')">+</button>
                                    </div>
                                </div>
                                
                                <div>
                                    <label for="child-count" class="block text-xs text-gray-400 mb-1">å„¿ç«¥</label>
                                    <div class="flex items-center">
                                        <button type="button" class="bg-gray-700 rounded-l-md px-3 py-2 focus:outline-none" onclick="decrementCount('child-count')">-</button>
                                        <input type="number" id="child-count" name="child-count" min="0" max="10" value="0" class="form-input w-12 text-center py-2 border-l-0 border-r-0 rounded-none" readonly>
                                        <button type="button" class="bg-gray-700 rounded-r-md px-3 py-2 focus:outline-none" onclick="incrementCount('child-count')">+</button>
                                    </div>
                                </div>
                                
                                <div>
                                    <label for="senior-count" class="block text-xs text-gray-400 mb-1">è€äºº</label>
                                    <div class="flex items-center">
                                        <button type="button" class="bg-gray-700 rounded-l-md px-3 py-2 focus:outline-none" onclick="decrementCount('senior-count')">-</button>
                                        <input type="number" id="senior-count" name="senior-count" min="0" max="10" value="0" class="form-input w-12 text-center py-2 border-l-0 border-r-0 rounded-none" readonly>
                                        <button type="button" class="bg-gray-700 rounded-r-md px-3 py-2 focus:outline-none" onclick="incrementCount('senior-count')">+</button>
                                    </div>
                                </div>
                                
                                <div class="md:col-span-1">
                                    <label for="total-count" class="block text-xs text-blue-400 mb-1">æ€»äººæ•°</label>
                                    <div class="form-input w-full py-2 text-center font-bold">
                                        <span id="total-count">2</span> äºº
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <label for="guide-type" class="block text-sm font-medium text-gray-300 mb-2">å¯¼è§ˆæœåŠ¡</label>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="payment-method guide-option" onclick="selectGuideOption(this, 'robot')">
                                    <div class="flex items-center">
                                        <i class="fas fa-robot text-blue-400 payment-icon"></i>
                                        <div>
                                            <div class="font-medium">æœºå™¨äººå¯¼æ¸¸</div>
                                            <div class="text-xs text-gray-400">Â¥150/å›¢</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="payment-method guide-option" onclick="selectGuideOption(this, 'human')">
                                    <div class="flex items-center">
                                        <i class="fas fa-user-tie text-purple-400 payment-icon"></i>
                                        <div>
                                            <div class="font-medium">ä¸“ä¸šè®²è§£å‘˜</div>
                                            <div class="text-xs text-gray-400">Â¥100/å›¢</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="payment-method guide-option selected" onclick="selectGuideOption(this, 'none')">
                                    <div class="flex items-center">
                                        <i class="fas fa-walking text-green-400 payment-icon"></i>
                                        <div>
                                            <div class="font-medium">è‡ªåŠ©æ¸¸è§ˆ</div>
                                            <div class="text-xs text-gray-400">å…è´¹</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <label for="additional-options" class="block text-sm font-medium text-gray-300 mb-2">é¢å¤–é€‰é¡¹</label>
                            <div class="space-y-2">
                                <div class="flex items-center">
                                    <input type="checkbox" id="option-photo" name="option-photo" class="mr-2 text-blue-500 focus:ring-blue-500 rounded">
                                    <label for="option-photo" class="text-sm">ä¸“ä¸šæ‘„å½±æœåŠ¡ (Â¥150)</label>
                                </div>
                                
                                <div class="flex items-center">
                                    <input type="checkbox" id="option-vip" name="option-vip" class="mr-2 text-blue-500 focus:ring-blue-500 rounded">
                                    <label for="option-vip" class="text-sm">VIPé€šé“ (Â¥80)</label>
                                </div>
                                
                                <div class="flex items-center">
                                    <input type="checkbox" id="option-meal" name="option-meal" class="mr-2 text-blue-500 focus:ring-blue-500 rounded">
                                    <label for="option-meal" class="text-sm">é¤é£Ÿå¥—é¤ (Â¥120)</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                
                <!-- æ­¥éª¤3ï¼šæ”¯ä»˜ä¿¡æ¯ -->
                <div class="step-container">
                    <div class="flex items-center mb-4">
                        <div class="step-circle">3</div>
                        <h2 class="text-xl font-bold ml-3">æ”¯ä»˜ä¿¡æ¯</h2>
                    </div>
                    
                    <div class="booking-card p-6">
                        <div class="grid grid-cols-1 gap-4">
                            <div>
                                <label for="name" class="block text-sm font-medium text-gray-300 mb-2">è”ç³»å§“å</label>
                                <input type="text" id="name" name="name" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å" class="form-input w-full rounded-md">
                            </div>
                            
                            <div>
                                <label for="phone" class="block text-sm font-medium text-gray-300 mb-2">è”ç³»ç”µè¯</label>
                                <input type="tel" id="phone" name="phone" placeholder="è¯·è¾“å…¥æ‚¨çš„æ‰‹æœºå·ç " class="form-input w-full rounded-md">
                            </div>
                            
                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-300 mb-2">ç”µå­é‚®ç®±</label>
                                <input type="email" id="email" name="email" placeholder="ç”¨äºæ¥æ”¶ç”µå­ç¥¨å’Œè¡Œç¨‹ç¡®è®¤" class="form-input w-full rounded-md">
                            </div>
                        </div>
                        
                        <div class="mt-6">
                            <label class="block text-sm font-medium text-gray-300 mb-2">æ”¯ä»˜æ–¹å¼</label>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="payment-method selected" onclick="selectPaymentMethod(this, 'wechat')">
                                    <div class="flex items-center">
                                        <i class="fab fa-weixin text-green-400 payment-icon"></i>
                                        <span>å¾®ä¿¡æ”¯ä»˜</span>
                                    </div>
                                </div>
                                
                                <div class="payment-method" onclick="selectPaymentMethod(this, 'alipay')">
                                    <div class="flex items-center">
                                        <i class="fab fa-alipay text-blue-400 payment-icon"></i>
                                        <span>æ”¯ä»˜å®</span>
                                    </div>
                                </div>
                                
                                <div class="payment-method" onclick="selectPaymentMethod(this, 'card')">
                                    <div class="flex items-center">
                                        <i class="fas fa-credit-card text-purple-400 payment-icon"></i>
                                        <span>é“¶è¡Œå¡</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-6">
                            <label for="promo-code" class="block text-sm font-medium text-gray-300 mb-2">ä¼˜æƒ ç </label>
                            <div class="flex">
                                <input type="text" id="promo-code" name="promo-code" placeholder="è¾“å…¥ä¼˜æƒ ç " class="form-input rounded-l-md w-full">
                                <button type="button" class="bg-gray-700 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-r-md focus:outline-none transition">
                                    åº”ç”¨
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div>
                <div class="booking-card p-6 sticky top-24">
                    <h2 class="text-xl font-bold mb-4">è®¢å•æ‘˜è¦</h2>
                    
                    <div class="space-y-4">
                        <div id="selected-attraction" class="hidden">
                            <div class="text-sm text-gray-400 mb-1">å·²é€‰æ™¯ç‚¹</div>
                            <div class="font-medium" id="attraction-name">æœªé€‰æ‹©</div>
                        </div>
                        
                        <div>
                            <div class="text-sm text-gray-400 mb-1">å‚è§‚æ—¥æœŸ</div>
                            <div class="font-medium" id="summary-date">æœªé€‰æ‹©</div>
                        </div>
                        
                        <div>
                            <div class="text-sm text-gray-400 mb-1">å‚è§‚æ—¶é—´</div>
                            <div class="font-medium" id="summary-time">æœªé€‰æ‹©</div>
                        </div>
                        
                        <div>
                            <div class="text-sm text-gray-400 mb-1">å‚è§‚äººæ•°</div>
                            <div class="font-medium">
                                <span id="summary-adult-count">2</span> æˆäººï¼Œ
                                <span id="summary-child-count">0</span> å„¿ç«¥ï¼Œ
                                <span id="summary-senior-count">0</span> è€äºº
                            </div>
                        </div>
                        
                        <div id="guide-selection" class="hidden">
                            <div class="text-sm text-gray-400 mb-1">å¯¼è§ˆæœåŠ¡</div>
                            <div class="font-medium" id="guide-type">è‡ªåŠ©æ¸¸è§ˆ</div>
                        </div>
                        
                        <div class="border-t border-gray-700 pt-4 mt-4">
                            <div class="flex justify-between mb-2">
                                <div>é—¨ç¥¨è´¹ç”¨</div>
                                <div id="ticket-price">Â¥0</div>
                            </div>
                            
                            <div class="flex justify-between mb-2" id="guide-fee-container">
                                <div>å¯¼è§ˆè´¹ç”¨</div>
                                <div id="guide-fee">Â¥0</div>
                            </div>
                            
                            <div class="flex justify-between mb-2 hidden" id="additional-fee-container">
                                <div>é™„åŠ æœåŠ¡</div>
                                <div id="additional-fee">Â¥0</div>
                            </div>
                            
                            <div class="flex justify-between mb-2 text-green-400 hidden" id="discount-container">
                                <div>ä¼˜æƒ æŠ˜æ‰£</div>
                                <div id="discount-amount">-Â¥0</div>
                            </div>
                            
                            <div class="flex justify-between font-bold text-lg mt-4 pt-2 border-t border-gray-700">
                                <div>æ€»è®¡</div>
                                <div id="total-price">Â¥0</div>
                            </div>
                        </div>
                        
                        <div class="mt-6">
                            <button id="submit-booking" class="booking-btn w-full" onclick="submitBooking()">
                                <i class="fas fa-check-circle"></i>
                                ç¡®è®¤é¢„è®¢
                            </button>
                        </div>
                        
                        <div class="text-xs text-gray-400 text-center mt-4">
                            ç‚¹å‡»"ç¡®è®¤é¢„è®¢"ï¼Œå³è¡¨ç¤ºæ‚¨åŒæ„æˆ‘ä»¬çš„
                            <a href="#" class="text-blue-400 hover:underline">é¢„è®¢æ¡æ¬¾</a>
                            å’Œ
                            <a href="#" class="text-blue-400 hover:underline">éšç§æ”¿ç­–</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- ç¡®è®¤å¼¹çª— -->
    <div id="confirmationModal" class="modal-backdrop">
        <div class="modal-content">
            <div class="p-6 text-center">
                <div id="loading-state" class="flex flex-col items-center">
                    <div class="loading-spinner mb-4"></div>
                    <h3 class="text-lg font-medium mb-2">æ­£åœ¨å¤„ç†æ‚¨çš„é¢„è®¢...</h3>
                    <p class="text-sm text-gray-400">è¯·ç¨å€™ï¼Œè¿™å¯èƒ½éœ€è¦å‡ ç§’é’Ÿæ—¶é—´</p>
                </div>
                
                <div id="success-state" class="flex flex-col items-center hidden">
                    <div class="success-animation mb-4">
                        <div class="success-checkmark"></div>
                    </div>
                    <h3 class="text-xl font-medium text-green-400 mb-4">é¢„è®¢æˆåŠŸï¼</h3>
                    
                    <div class="ticket-info text-left w-full">
                        <div class="flex justify-between items-center mb-4">
                            <div>
                                <span class="text-xs bg-blue-900 text-blue-300 py-1 px-2 rounded">ç”µå­ç¥¨</span>
                            </div>
                            <div class="text-xs text-gray-400">é¢„è®¢å·: <span id="booking-number">BK25050601</span></div>
                        </div>
                        
                        <div class="space-y-2">
                            <div>
                                <div class="text-xs text-gray-400">æ™¯ç‚¹:</div>
                                <div class="font-medium" id="confirmed-attraction"></div>
                            </div>
                            
                            <div>
                                <div class="text-xs text-gray-400">æ—¥æœŸä¸æ—¶é—´:</div>
                                <div class="font-medium" id="confirmed-datetime"></div>
                            </div>
                            
                            <div>
                                <div class="text-xs text-gray-400">äººæ•°:</div>
                                <div class="font-medium" id="confirmed-visitors"></div>
                            </div>
                        </div>
                        
                        <div class="mt-4 text-center">
                            <div class="text-xs text-gray-400 mb-1">ç”µå­ç¥¨å·²å‘é€è‡³æ‚¨çš„é‚®ç®±</div>
                            <div class="font-medium text-blue-400" id="confirmed-email">user@example.com</div>
                        </div>
                    </div>
                    
                    <div class="mt-6 space-y-3 w-full">
                        <button class="booking-btn w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800">
                            <i class="fas fa-download mr-2"></i>
                            ä¸‹è½½ç”µå­ç¥¨
                        </button>
                        
                        <button onclick="closeConfirmationModal()" class="w-full py-2 px-4 border border-gray-600 rounded-md hover:bg-gray-800 transition">
                            è¿”å›é¦–é¡µ
                        </button>
                    </div>
                </div>
                
                <div id="error-state" class="flex flex-col items-center hidden">
                    <div class="mb-4 text-red-500 text-4xl">
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                    <h3 class="text-lg font-medium mb-2">é¢„è®¢å¤„ç†å¤±è´¥</h3>
                    <p class="text-sm text-gray-400 mb-6">æŠ±æ­‰ï¼Œå¤„ç†æ‚¨çš„é¢„è®¢æ—¶é‡åˆ°äº†é—®é¢˜ï¼Œè¯·ç¨åå†è¯•</p>
                    
                    <button onclick="closeConfirmationModal()" class="booking-btn">
                        è¿”å›ä¿®æ”¹
                    </button>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-gray-900 bg-opacity-80 backdrop-filter backdrop-blur-lg mt-8 py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between">
                <div class="mb-6 md:mb-0">
                    <h2 class="text-xl font-bold mb-4 bg-gradient-to-r from-blue-400 to-indigo-500 bg-clip-text text-transparent">å†°é›ªä¸–ç•Œæœºå™¨äººå¯¼æ¸¸</h2>
                    <p class="text-gray-400 max-w-md">è®©æ‚¨çš„å†°é›ªä¸–ç•Œä¹‹æ—…æ›´åŠ æ™ºèƒ½ã€å®‰å…¨ã€æœ‰è¶£ï¼Œæˆ‘ä»¬çš„æœºå™¨äººå¯¼æ¸¸å°†å…¨ç¨‹ä¸ºæ‚¨æä¾›ä¸“ä¸šæœåŠ¡ã€‚</p>
                </div>
                <div class="grid grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-lg font-semibold mb-3">å¿«é€Ÿé“¾æ¥</h3>
                        <ul class="space-y-2">
                            <li><a href="index.html" class="text-gray-400 hover:text-white transition">é¦–é¡µ</a></li>
                            <li><a href="map.html" class="text-gray-400 hover:text-white transition">åœ°å›¾å¯¼èˆª</a></li>
                            <li><a href="#" class="text-gray-400 hover:text-white transition">æ™¯ç‚¹ä»‹ç»</a></li>
                            <li><a href="booking.html" class="text-gray-400 hover:text-white transition">é¢„è®¢ä¿¡æ¯</a></li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-3">è”ç³»æˆ‘ä»¬</h3>
                        <ul class="space-y-2">
                            <li class="flex items-center"><i class="fas fa-envelope text-blue-400 mr-2"></i> <span class="text-gray-400">zy135246_2024@qq.com</span></li>
                            <li class="flex items-center"><i class="fas fa-phone text-blue-400 mr-2"></i> <span class="text-gray-400">132 8492 3154</span></li>
                            <li class="flex items-center"><i class="fas fa-map-marker-alt text-blue-400 mr-2"></i> <span class="text-gray-400">å“ˆå°”æ»¨å†°é›ªä¸–ç•Œä¸»é¢˜å…¬å›­</span></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-6 text-center text-gray-500 text-sm">
                &copy; 2025 ä¸œåŒ—å°æ¸…åç³»ç»Ÿ ç‰ˆæƒæ‰€æœ‰ã€‚
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ç§»åŠ¨èœå•åˆ‡æ¢
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            // åˆå§‹åŒ–æ—¥æœŸé€‰æ‹©å™¨æœ€å°æ—¥æœŸä¸ºæ˜å¤©
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const formattedDate = tomorrow.toISOString().split('T')[0];
            document.getElementById('booking-date').min = formattedDate;
            
            // æ£€æŸ¥URLå‚æ•°æ˜¯å¦æœ‰é¢„é€‰æ™¯ç‚¹
            const urlParams = new URLSearchParams(window.location.search);
            const preselectedAttraction = urlParams.get('attraction');
            if (preselectedAttraction) {
                const attractionCards = document.querySelectorAll('.attraction-card');
                attractionCards.forEach(card => {
                    if (card.getAttribute('onclick').includes(preselectedAttraction)) {
                        selectAttraction(card, preselectedAttraction);
                    }
                });
            }
            
            // æ—¥æœŸå’Œæ—¶é—´å˜åŠ¨ç›‘å¬
            document.getElementById('booking-date').addEventListener('change', updateOrderSummary);
            document.getElementById('booking-time').addEventListener('change', updateOrderSummary);
            
            // é¢å¤–é€‰é¡¹å˜åŠ¨ç›‘å¬
            document.getElementById('option-photo').addEventListener('change', updateOrderSummary);
            document.getElementById('option-vip').addEventListener('change', updateOrderSummary);
            document.getElementById('option-meal').addEventListener('change', updateOrderSummary);
            
            // åˆå§‹åŒ–æ€»äººæ•°è®¡ç®—
            updateTotalCount();
            
            // ç²’å­ç‰¹æ•ˆåˆå§‹åŒ–
            initParticles();
        });
        
        // ç²’å­ç‰¹æ•ˆ
        function initParticles() {
            const particles = document.getElementById('particles');
            
            function createParticle() {
                const particle = document.createElement('div');
                particle.style.position = 'absolute';
                particle.style.width = Math.random() * 3 + 1 + 'px';
                particle.style.height = particle.style.width;
                particle.style.backgroundColor = `rgba(255, 255, 255, ${Math.random() * 0.3 + 0.1})`;
                particle.style.borderRadius = '50%';
                particle.style.top = Math.random() * 100 + 'vh';
                particle.style.left = Math.random() * 100 + 'vw';
                
                const duration = Math.random() * 20 + 10;
                particle.style.animation = `float ${duration}s linear infinite`;
                
                const keyframes = `
                    @keyframes float {
                        0% {
                            transform: translateY(0) rotate(0);
                            opacity: ${Math.random() * 0.3 + 0.2};
                        }
                        50% {
                            opacity: ${Math.random() * 0.3 + 0.1};
                        }
                        100% {
                            transform: translateY(-${Math.random() * 100 + 50}vh) rotate(${Math.random() * 360}deg);
                            opacity: 0;
                        }
                    }
                `;
                
                const style = document.createElement('style');
                style.innerHTML = keyframes;
                document.head.appendChild(style);
                
                particles.appendChild(particle);
                
                setTimeout(() => {
                    particle.remove();
                    style.remove();
                }, duration * 1000);
            }
            
            // åˆ›å»ºåˆå§‹ç²’å­
            for (let i = 0; i < 30; i++) {
                createParticle();
            }
            
            // å®šæœŸåˆ›å»ºæ–°ç²’å­
            setInterval(createParticle, 1000);
        }
        
        // æ™¯ç‚¹æ•°æ®
        const attractionsData = {
            'icesculpture': {
                name: 'å†°é›•è‰ºæœ¯é¦†',
                price: 98
            },
            'sledtrack': {
                name: 'é›ªæ©‡æ»‘é“',
                price: 120
            },
            'restaurant': {
                name: 'åŒ—ææ˜Ÿé¤å…',
                price: 268
            },
            'forest': {
                name: 'é›ªå›½å¥‡å¹»æ£®æ—',
                price: 158
            }
        };
        
        let selectedAttraction = '';
        let selectedPaymentMethod = 'wechat';
        let selectedGuideOption = 'none';
        
        // é€‰æ‹©æ™¯ç‚¹
        function selectAttraction(card, attractionId) {
            const attractionCards = document.querySelectorAll('.attraction-card');
            attractionCards.forEach(c => c.classList.remove('selected'));
            card.classList.add('selected');
            
            selectedAttraction = attractionId;
            document.getElementById('selected-attraction').classList.remove('hidden');
            document.getElementById('attraction-name').textContent = attractionsData[attractionId].name;
            
            updateOrderSummary();
        }
        
        // é€‰æ‹©æ”¯ä»˜æ–¹å¼
        function selectPaymentMethod(method, paymentType) {
            const paymentMethods = document.querySelectorAll('.payment-method:not(.guide-option)');
            paymentMethods.forEach(m => m.classList.remove('selected'));
            method.classList.add('selected');
            
            selectedPaymentMethod = paymentType;
        }
        
        // é€‰æ‹©å¯¼è§ˆé€‰é¡¹
        function selectGuideOption(option, guideType) {
            const guideOptions = document.querySelectorAll('.guide-option');
            guideOptions.forEach(o => o.classList.remove('selected'));
            option.classList.add('selected');
            
            selectedGuideOption = guideType;
            document.getElementById('guide-selection').classList.remove('hidden');
            
            let guideTypeText = 'è‡ªåŠ©æ¸¸è§ˆ';
            if (guideType === 'robot') {
                guideTypeText = 'æœºå™¨äººå¯¼æ¸¸';
            } else if (guideType === 'human') {
                guideTypeText = 'ä¸“ä¸šè®²è§£å‘˜';
            }
            
            document.getElementById('guide-type').textContent = guideTypeText;
            updateOrderSummary();
        }
        
        // å¢åŠ äººæ•°
        function incrementCount(id) {
            const input = document.getElementById(id);
            const currentValue = parseInt(input.value);
            if (currentValue < parseInt(input.max)) {
                input.value = currentValue + 1;
                updateTotalCount();
                updateOrderSummary();
            }
        }
        
        // å‡å°‘äººæ•°
        function decrementCount(id) {
            const input = document.getElementById(id);
            const currentValue = parseInt(input.value);
            if (currentValue > parseInt(input.min)) {
                input.value = currentValue - 1;
                updateTotalCount();
                updateOrderSummary();
            }
        }
        
        // æ›´æ–°æ€»äººæ•°
        function updateTotalCount() {
            const adultCount = parseInt(document.getElementById('adult-count').value);
            const childCount = parseInt(document.getElementById('child-count').value);
            const seniorCount = parseInt(document.getElementById('senior-count').value);
            
            const totalCount = adultCount + childCount + seniorCount;
            document.getElementById('total-count').textContent = totalCount;
            
            // æ›´æ–°æ‘˜è¦ä¸­çš„äººæ•°
            document.getElementById('summary-adult-count').textContent = adultCount;
            document.getElementById('summary-child-count').textContent = childCount;
            document.getElementById('summary-senior-count').textContent = seniorCount;
        }
        
        // æ›´æ–°è®¢å•æ‘˜è¦
        function updateOrderSummary() {
            // æ›´æ–°æ—¥æœŸå’Œæ—¶é—´
            const bookingDate = document.getElementById('booking-date').value;
            const bookingTime = document.getElementById('booking-time').value;
            
            if (bookingDate) {
                const date = new Date(bookingDate);
                const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
                document.getElementById('summary-date').textContent = date.toLocaleDateString('zh-CN', options);
            } else {
                document.getElementById('summary-date').textContent = 'æœªé€‰æ‹©';
            }
            
            if (bookingTime) {
                document.getElementById('summary-time').textContent = bookingTime;
            } else {
                document.getElementById('summary-time').textContent = 'æœªé€‰æ‹©';
            }
            
            // è®¡ç®—ä»·æ ¼
            calculateTotalPrice();
        }
        
        // è®¡ç®—æ€»ä»·
        function calculateTotalPrice() {
            let totalPrice = 0;
            let ticketPrice = 0;
            let guideFee = 0;
            let additionalFee = 0;
            let discount = 0;
            
            // é—¨ç¥¨è´¹ç”¨
            if (selectedAttraction) {
                const adultCount = parseInt(document.getElementById('adult-count').value);
                const childCount = parseInt(document.getElementById('child-count').value);
                const seniorCount = parseInt(document.getElementById('senior-count').value);
                
                // æˆäººå…¨ä»·ï¼Œå„¿ç«¥å’Œè€äººåŠä»·
                const basePrice = attractionsData[selectedAttraction].price;
                ticketPrice = basePrice * adultCount + basePrice * 0.5 * childCount + basePrice * 0.7 * seniorCount;
                
                // å†°é›•è‰ºæœ¯é¦†å…«æŠ˜ä¼˜æƒ 
                if (selectedAttraction === 'icesculpture') {
                    discount = ticketPrice * 0.2;
                    ticketPrice = ticketPrice * 0.8;
                }
                
                document.getElementById('ticket-price').textContent = `Â¥${ticketPrice.toFixed(0)}`;
            }
            
            // å¯¼è§ˆè´¹ç”¨
            if (selectedGuideOption === 'robot') {
                guideFee = 50;
            } else if (selectedGuideOption === 'human') {
                guideFee = 100;
            }
            document.getElementById('guide-fee').textContent = `Â¥${guideFee}`;
            
            // é™„åŠ æœåŠ¡è´¹ç”¨
            const photoService = document.getElementById('option-photo').checked;
            const vipAccess = document.getElementById('option-vip').checked;
            const mealPackage = document.getElementById('option-meal').checked;
            
            if (photoService) additionalFee += 150;
            if (vipAccess) additionalFee += 80;
            if (mealPackage) additionalFee += 120;
            
            if (additionalFee > 0) {
                document.getElementById('additional-fee-container').classList.remove('hidden');
                document.getElementById('additional-fee').textContent = `Â¥${additionalFee}`;
            } else {
                document.getElementById('additional-fee-container').classList.add('hidden');
            }
            
            // æŠ˜æ‰£æ˜¾ç¤º
            if (discount > 0) {
                document.getElementById('discount-container').classList.remove('hidden');
                document.getElementById('discount-amount').textContent = `-Â¥${discount.toFixed(0)}`;
            } else {
                document.getElementById('discount-container').classList.add('hidden');
            }
            
            // æ€»ä»·
            totalPrice = ticketPrice + guideFee + additionalFee;
            document.getElementById('total-price').textContent = `Â¥${totalPrice.toFixed(0)}`;
        }
        
        // æäº¤é¢„è®¢
        function submitBooking() {
            // åŸºæœ¬éªŒè¯
            if (!selectedAttraction) {
                alert('è¯·é€‰æ‹©ä¸€ä¸ªæ™¯ç‚¹');
                return;
            }
            
            const bookingDate = document.getElementById('booking-date').value;
            if (!bookingDate) {
                alert('è¯·é€‰æ‹©å‚è§‚æ—¥æœŸ');
                return;
            }
            
            const bookingTime = document.getElementById('booking-time').value;
            if (!bookingTime) {
                alert('è¯·é€‰æ‹©å‚è§‚æ—¶é—´');
                return;
            }
            
            const name = document.getElementById('name').value;
            if (!name) {
                alert('è¯·è¾“å…¥è”ç³»å§“å');
                return;
            }
            
            const phone = document.getElementById('phone').value;
            if (!phone) {
                alert('è¯·è¾“å…¥è”ç³»ç”µè¯');
                return;
            }
            
            const email = document.getElementById('email').value;
            if (!email) {
                alert('è¯·è¾“å…¥ç”µå­é‚®ç®±');
                return;
            }
            
            // æ˜¾ç¤ºç¡®è®¤å¼¹çª—
            document.getElementById('confirmationModal').classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // æ¨¡æ‹Ÿå¤„ç†é¢„è®¢
            setTimeout(function() {
                document.getElementById('loading-state').classList.add('hidden');
                
                // 95%æ¦‚ç‡æˆåŠŸï¼Œ5%æ¦‚ç‡å¤±è´¥
                if (Math.random() < 0.95) {
                    document.getElementById('success-state').classList.remove('hidden');
                    
                    // æ›´æ–°ç¡®è®¤ä¿¡æ¯
                    document.getElementById('confirmed-attraction').textContent = attractionsData[selectedAttraction].name;
                    
                    const date = new Date(bookingDate);
                    const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
                    document.getElementById('confirmed-datetime').textContent = 
                        `${date.toLocaleDateString('zh-CN', options)} ${bookingTime}`;
                    
                    const adultCount = document.getElementById('adult-count').value;
                    const childCount = document.getElementById('child-count').value;
                    const seniorCount = document.getElementById('senior-count').value;
                    
                    document.getElementById('confirmed-visitors').textContent = 
                        `${adultCount} æˆäºº, ${childCount} å„¿ç«¥, ${seniorCount} è€äºº`;
                        
                    document.getElementById('confirmed-email').textContent = email;
                    
                    // ç”Ÿæˆéšæœºé¢„è®¢å·
                    const randomNum = Math.floor(Math.random() * 10000).toString().padStart(4, '0');
                    document.getElementById('booking-number').textContent = `BK2505${randomNum}`;
                } else {
                    document.getElementById('error-state').classList.remove('hidden');
                }
            }, 2000);
        }
        
        // å…³é—­ç¡®è®¤å¼¹çª—
        function closeConfirmationModal() {
            document.getElementById('confirmationModal').classList.remove('active');
            document.body.style.overflow = '';
            
            // é‡ç½®çŠ¶æ€
            setTimeout(function() {
                document.getElementById('loading-state').classList.remove('hidden');
                document.getElementById('success-state').classList.add('hidden');
                document.getElementById('error-state').classList.add('hidden');
            }, 300);
        }
    </script>
</body>
</html>

